(function(){null==window.__songle__&&(window.__songle__={});(function(c){var f,b,a,d;c.ajax=function(a,b){var d;null==b&&(b={});null==b.method&&(b.method="GET");null==b.responseType&&(b.responseType="text");d=new XMLHttpRequest;c.debug("XHR requested loading:\n"+b.method+' "'+a+'"');d.addEventListener("abort",function(a){return b.onAbort&&b.onAbort(a,d)},!1);d.addEventListener("error",function(a){return b.onError&&b.onError(a,d)},!1);d.addEventListener("load",function(a){switch(!1){case !(200===d.status||
304===d.status):return b.onComplete&&b.onComplete(a,d);case !(400<=d.status):return b.onError&&b.onError(a,d);case !(500<=d.status):return b.onError&&b.onError(a,d)}},!1);d.addEventListener("progress",function(a){return b.onProgress&&b.onProgress(a,d)},!1);d.open(b.method,a,!0);d.responseType=b.responseType;return d.send()};c.getJSON=function(a,h){null==h&&(h={});return b(a,{onMiss:function(b){return c.ajax(a,{responseType:"json",onAbort:function(a){b=f(a.target.response);return h.onAbort&&h.onAbort(b)},
onError:function(a){b=f(a.target.response);return h.onError&&h.onError(b)},onComplete:function(c){b=f(c.target.response);h.onComplete&&h.onComplete(b);return d(a,JSON.stringify(b))},onProgress:h.onProgress})},onPass:function(a){a=f(a);return h.onComplete&&h.onComplete(a)}})};f=function(a){return"string"===typeof a?JSON.parse(a):a};b=function(b,d){var c;null==d&&(d={});c=a(b);return setTimeout(function(){return __songle__.useCacheMode&&c?d.onPass&&d.onPass(c):d.onMiss&&d.onMiss(c)},1)};a=function(a){try{return localStorage.getItem(a)}catch(b){return null}};
return d=function(a,b){try{return localStorage.setItem(a,b)}catch(d){return null}}})(__songle__)}).call(this);
(function(){null==window.__songle__&&(window.__songle__={});(function(c){var f;null==c.__erroredSongleWidgets__&&(c.__erroredSongleWidgets__=[]);null==c.__createdSongleWidgets__&&(c.__createdSongleWidgets__=[]);null==c.__readiedSongleWidgets__&&(c.__readiedSongleWidgets__=[]);JSON.decode=JSON.parse;JSON.encode=JSON.stringify;c.decodePostMessage=function(b){return c.msie9?JSON.decode(b):b};c.encodePostMessage=function(b){return c.msie9?JSON.encode(b):b};c.findSongleWidgets=function(){var b,a,d,e,h;
a=[];h=c.__readiedSongleWidgets__;d=0;for(e=h.length;d<e;d++)b=h[d],b.removed||a.push(b);return a.sort(function(a,b){return a.dataset.api>b.dataset.api})};c.findSongleWidgetsByAPI=function(b){var a,d,e,h,k;d=[];k=c.findSongleWidgets();e=0;for(h=k.length;e<h;e++)a=k[e],a.dataset.api===b&&d.push(a);return d};c.findSongleWidgetsByURL=function(b){var a,d,e,h,k;d=[];k=c.findSongleWidgets();e=0;for(h=k.length;e<h;e++)a=k[e],a.dataset.url===b&&d.push(a);return d};c.findSongleWidgetsByWidgetMode=function(b){var a,
d,e,h,k;d=[];k=c.findSongleWidgets();e=0;for(h=k.length;e<h;e++)a=k[e],a.mode===b&&d.push(a);return d};c.findSongleWidgetsByWidgetUUID=function(b){var a,d,e,h,k;d=[];k=c.findSongleWidgets();e=0;for(h=k.length;e<h;e++)a=k[e],a.uuid===b&&d.push(a);return d};c.findSongleWidgetsByVideoID=function(b){var a,d,e,h,k;d=[];k=c.findSongleWidgets();e=0;for(h=k.length;e<h;e++)a=k[e],a.videoID===b&&d.push(a);return d};c.postAPIMessage=function(b,a){if(a.dataset.api){b.api=a.dataset.api;b.url=a.dataset.url;b.widgetMode=
a.dataset.widgetMode||a.mode;b.widgetUUID=a.dataset.widgetUUID||a.uuid;b.videoID=a.dataset.videoID||a.videoID;b.timeStamp=c.uptime;try{return f(a.uuid).postMessage(c.encodePostMessage(b),"*")}catch(d){return c.error(d)}}};c.postAPIPlayMessage=function(b,a){b.type="play";return c.postAPIMessage(b,a)};c.postAPIPauseMessage=function(b,a){b.type="pause";return c.postAPIMessage(b,a)};c.postAPIStopMessage=function(b,a){b.type="stop";return c.postAPIMessage(b,a)};c.postAPISeekToMessage=function(b,a){b.type=
"seekTo";return c.postAPIMessage(b,a)};c.postAPISeekToPrevChorusMessage=function(b,a){b.type="seekToPrevChorus";return c.postAPIMessage(b,a)};c.postAPISeekToNextChorusMessage=function(b,a){b.type="seekToNextChorus";return c.postAPIMessage(b,a)};c.postAPISeekToPrevRepeatMessage=function(b,a){b.type="seekToPrevRepeat";return c.postAPIMessage(b,a)};c.postAPISeekToNextRepeatMessage=function(b,a){b.type="seekToNextRepeat";return c.postAPIMessage(b,a)};c.postAPISetVolumeMessage=function(b,a){b.type="setVolume";
return c.postAPIMessage(b,a)};c.postAPIRemoveMessage=function(b,a){b.type="remove";return c.postAPIMessage(b,a)};c.postAPISyncMessage=function(b){return c.postAPIMessage({duration:b.duration.milliseconds,position:b.position.milliseconds,playedRatio:b.playedRatio,loadedRatio:b.loadedRatio,type:"sync"},b)};c.postAPIOnErrorMessage=function(b,a){b.type="onError";return c.postAPIMessage(b,a)};c.postAPIOnCreateMessage=function(b,a){b.type="onCreate";return c.postAPIMessage(b,a)};c.postAPIOnReadyMessage=
function(b,a){b.type="onReady";return c.postAPIMessage(b,a)};c.postAPIOnRemoveMessage=function(b,a){b.type="onRemove";return c.postAPIMessage(b,a)};c.postAPIOnPlayMessage=function(b){return c.postAPIMessage({type:"onPlay"},b)};c.postAPIOnPauseMessage=function(b){return c.postAPIMessage({type:"onPause"},b)};c.postAPIOnStopMessage=function(b){return c.postAPIMessage({type:"onStop"},b)};c.postAPIOnSeekMessage=function(b){return c.postAPIMessage({type:"onSeek"},b)};c.postAPIOnFinishMessage=function(b){return c.postAPIMessage({type:"onFinish"},
b)};return f=function(b){return b?window.frames[b]:window.parent}})(__songle__)}).call(this);(function(){null==window.__songle__&&(window.__songle__={});(function(c){return c.cookies=function(c){var b,a,d,e,h;d=document.cookie.split("; ");e=0;for(h=d.length;e<h;e++)if(b=d[e],a=b.match(/(.+?)=(.+)/)||[],b=a[1],a=a[2],b===c)return a}})(__songle__)}).call(this);
(function(){null==window.__songle__&&(window.__songle__={});(function(c){var f,b,a;Object.defineProperties(c,{protocol:{configurable:!0,get:function(){switch(location.protocol){case "file:":return c.useSSLMode?"https:":"http:";case "http:":return c.useSSLMode?"https:":"http:";case "https:":return"https:"}}},host:{configurable:!0,get:function(){return c.params("host")||f()}},port:{configurable:!0,get:function(){return c.params("port")||b()}},searchQueries:{configurable:!0,get:function(){var a,b,c,
k,r,n;c={};n=location.href.slice(location.href.indexOf("?")+1).split("&");k=0;for(r=n.length;k<r;k++)if(a=n[k],b=a.match(/(.+?)=(.+)/))a=b[1],b=b[2],c[a]=b;return c}}});c.createSearchQueries=function(a,b){var h,k;null==a&&(a={});null==b&&(b=c.searchQueries);for(h in a)k=a[h],b[h]=k;return b};c.createSearchQueriesWithJoin=function(b,e){null==b&&(b={});return a(c.createSearchQueries(b,e))};c.updateSearchQueries=function(a,b){var h,k,r;null==a&&(a={});null==b&&(b=c.searchQueries);for(h in a)for(k in r=
a[h],b)h===k&&(b[h]=r);return b};c.updateSearchQueriesWithJoin=function(b,e){null==b&&(b={});return a(c.updateSearchQueries(b,e))};c.params=function(a){var b,h,k;k=c.searchQueries;for(b in k)if(h=k[b],b===a)return h};f=function(){switch(c.rails.env){case "production":return"widget.songle.jp"}return"127.0.0.1"};b=function(){switch(c.rails.env){case "production":return""}return":3000"};return a=function(a){var b,c,k;c=[];for(b in a)k=a[b],c.push(""+b+"="+k);return c.join("&")}})(__songle__)}).call(this);
(function(){null==window.__songle__&&(window.__songle__={});(function(c){return c.Detector=function(){function c(a){this.widget=a;this.reset()}var b,a;c.prototype.forEach=function(c,e){var h;null==e&&(e={});null==e.offset&&(e.offset=0);null==e.positionA&&(e.positionA=0);null==e.positionB&&(e.positionB=0);null==e.searchRange&&(e.searchRange=200);h=-1*e.offset;b(this,h,c,e);return a(this,h,c,e)};b=function(a,b,c,k){var r;r=void 0===k.positionA?a.widget.position.milliseconds:k.positionA;k=void 0===k.positionB?
a.widget.position.milliseconds:k.positionB;k+=b;if(r<k)return a.detect(r,k,c)};a=function(a,b,c,k){var r,n;r=void 0===k.positionA?a.widget.position.milliseconds:k.positionA;n=void 0===k.positionB?a.widget.position.milliseconds:k.positionB;r=r+b-k.searchRange;n+=b;if(r<n)return a.detect(r,n,c)};return c}()})(__songle__)}).call(this);
(function(){var c={}.hasOwnProperty,f=function(b,a){function d(){this.constructor=b}for(var e in a)c.call(a,e)&&(b[e]=a[e]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};null==window.__songle__&&(window.__songle__={});(function(b){return b.BeatDetector=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}f(b,a);b.prototype.detect=function(a,b,c){var d,n,g,m,l,f,q,p,t,y,z,s,u,w,A;w=this.widget.song.analysis.bars;A=[];s=0;for(u=w.length;s<u;s++)d=
w[s],y=this.widget.song.analysis.bars[d.index-1],q=this.widget.song.analysis.bars[d.index+1],d.prev=y,d.next=q,n=d?d.start:void 0,p=q?q.start:this.widget.duration,a<=n+(p-n)&&b>n?A.push(function(){var n,p,u,s;u=d.beats;s=[];m=n=0;for(p=u.length;n<p;m=++n)g=u[m],z=d.beats[m-1],t=d.beats[m+1],void 0===z&&(z=void 0===y?{start:0}:y.beats[y.beats.length-1]),void 0===t&&(t=void 0===q?{start:this.widget.duration}:q.beats[0]),g.duration=t.start-g.start,g.bpm=isFinite(6E4/g.duration)?6E4/g.duration:0,g.prev=
z,g.next=t,f=g.start,a<=f+g.duration/2&&b>f&&!this.enterStates[g.index]&&(this.enterStates[g.index]=!0,c.enter&&c.enter({bar:d,beat:g})),l=g.start+g.duration/2,a<=l+g.duration/2&&b>l?this.leaveStates[g.index]?s.push(void 0):(this.leaveStates[g.index]=!0,s.push(c.leave&&c.leave({bar:d,beat:g}))):s.push(void 0);return s}.call(this)):A.push(void 0);return A};b.prototype.reset=function(){this.enterStates=[];return this.leaveStates=[]};return b}(b.Detector)})(__songle__)}).call(this);
(function(){var c={}.hasOwnProperty,f=function(b,a){function d(){this.constructor=b}for(var e in a)c.call(a,e)&&(b[e]=a[e]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};null==window.__songle__&&(window.__songle__={});(function(b){return b.ChordDetector=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}f(b,a);b.prototype.detect=function(a,b,c){var d,n,g,m,l;m=this.widget.song.analysis.chords;l=[];n=0;for(g=m.length;n<g;n++)d=m[n],d.prev=this.widget.song.analysis.chords[d.index-
1],d.next=this.widget.song.analysis.chords[d.index+1],d.prev&&(d.prev.prev=this.widget.song.analysis.chords[d.index-2],d.prev.next=this.widget.song.analysis.chords[d.index]),d.next&&(d.next.prev=this.widget.song.analysis.chords[d.index],d.next.next=this.widget.song.analysis.chords[d.index+2]),a<d.start+d.duration&&b>=d.start?this.states[d.index]?l.push(void 0):(this.states[d.index]=!0,d.prev&&c.leave&&c.leave({chord:d.prev}),d?l.push(c.enter&&c.enter({chord:d})):l.push(void 0)):l.push(void 0);return l};
b.prototype.reset=function(a){var b,c,d,n;null==a&&(a={});if(this.states)for(n=this.widget.song.analysis.chords,c=0,d=n.length;c<d;c++)b=n[c],this.states[b.index]&&(b=this.widget.song.analysis.chords[b.index-1])&&a.leave&&a.leave({chord:b});return this.states=[]};return b}(b.Detector)})(__songle__)}).call(this);
(function(){var c={}.hasOwnProperty,f=function(b,a){function d(){this.constructor=b}for(var e in a)c.call(a,e)&&(b[e]=a[e]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};null==window.__songle__&&(window.__songle__={});(function(b){return b.ChorusSegmentDetector=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}var c,h;f(b,a);b.prototype.detect=function(a,b,d){var g,m,l,f,q,p,t;p=this.widget.song.analysis.chorusSegments;t=[];f=0;for(q=p.length;f<
q;f++)g=p[f],t.push(function(){var f,x,q,p;q=g.repeats;p=[];f=0;for(x=q.length;f<x;f++)l=q[f],a<l.start+l.duration&&b>=l.start?(m=h(g,l),this.states[m]?p.push(void 0):(c(this,g,d),d.enter&&d.enter({repeat:l,segment:g}),p.push(this.states[m]=1))):(m=h(g,l),1===this.states[m]?(d.leave&&d.leave({repeat:l,segment:g}),p.push(this.states[m]=-1)):p.push(void 0));return p}.call(this));return t};b.prototype.reset=function(a){var b,d,g,m;null==a&&(a={});if(this.states)for(m=this.widget.song.analysis.chorusSegments,
d=0,g=m.length;d<g;d++)b=m[d],c(this,b,a);return this.states=[]};c=function(a,b,c){var d,e,l,f,q,p;q=b.repeats;p=[];l=0;for(f=q.length;l<f;l++)e=q[l],d=h(b,e),1===a.states[d]?(a.states[d]=-1,p.push(c.leave&&c.leave({repeat:e,segment:b}))):p.push(void 0);return p};h=function(a,b){return 32*a.index+b.index};return b}(b.Detector)})(__songle__)}).call(this);
(function(){var c={}.hasOwnProperty,f=function(b,a){function d(){this.constructor=b}for(var e in a)c.call(a,e)&&(b[e]=a[e]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};null==window.__songle__&&(window.__songle__={});(function(b){return b.NoteDetector=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}f(b,a);b.prototype.detect=function(a,b,c){var d,n,g,m,l;m=this.widget.song.analysis.notes;l=[];n=0;for(g=m.length;n<g;n++)d=m[n],d.prev=this.widget.song.analysis.notes[d.index-
1],d.next=this.widget.song.analysis.notes[d.index+1],d.prev&&(d.prev.prev=this.widget.song.analysis.notes[d.index-2],d.prev.next=this.widget.song.analysis.notes[d.index]),d.next&&(d.next.prev=this.widget.song.analysis.notes[d.index],d.next.next=this.widget.song.analysis.notes[d.index+2]),a<d.start+d.duration&&b>=d.start?this.states[d.index]?l.push(void 0):(this.states[d.index]=!0,d.prev&&c.leave&&c.leave({note:d.prev}),d?l.push(c.enter&&c.enter({note:d})):l.push(void 0)):l.push(void 0);return l};
b.prototype.reset=function(a){var b,c,d,n;null==a&&(a={});if(this.states)for(n=this.widget.song.analysis.notes,c=0,d=n.length;c<d;c++)b=n[c],this.states[b.index]&&(b=this.widget.song.analysis.notes[b.index-1])&&a.leave&&a.leave({note:b});return this.states=[]};return b}(b.Detector)})(__songle__)}).call(this);
(function(){var c={}.hasOwnProperty,f=function(b,a){function d(){this.constructor=b}for(var e in a)c.call(a,e)&&(b[e]=a[e]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};null==window.__songle__&&(window.__songle__={});(function(b){return b.RepeatSegmentDetector=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}var c,h;f(b,a);b.prototype.detect=function(a,b,d){var g,m,l,f,q,p,t;p=this.widget.song.analysis.repeatSegments;t=[];f=0;for(q=p.length;f<
q;f++)l=p[f],t.push(function(){var f,q,x,p;x=l.repeats;p=[];f=0;for(q=x.length;f<q;f++)m=x[f],a<m.start+m.duration&&b>=m.start?(g=h(l,m),this.states[g]?p.push(void 0):(c(this,l,d),d.enter&&d.enter({repeat:m,segment:l}),p.push(this.states[g]=1))):(g=h(l,m),1===this.states[g]?(d.leave&&d.leave({repeat:m,segment:l}),p.push(this.states[g]=-1)):p.push(void 0));return p}.call(this));return t};b.prototype.reset=function(a){var b,d,g,m;null==a&&(a={});if(this.states)for(m=this.widget.song.analysis.repeatSegments,
d=0,g=m.length;d<g;d++)b=m[d],c(this,b,a);return this.states=[]};c=function(a,b,c){var d,e,l,f,q,p;q=b.repeats;p=[];l=0;for(f=q.length;l<f;l++)e=q[l],d=h(b,e),1===a.states[d]?(a.states[d]=-1,p.push(c.leave&&c.leave({repeat:e,segment:b}))):p.push(void 0);return p};h=function(a,b){return 32*a.index+b.index};return b}(b.Detector)})(__songle__)}).call(this);
(function(){null==window.__songle__&&(window.__songle__={});(function(c){return c.createScriptElement=function(c,b){var a;null==b&&(b={});null==b.async&&(b.async=!1);null==b.defer&&(b.defer=!1);null==b.type&&(b.type="text/javascript");a=document.createElement("script");a.async=b.async;a.defer=b.defer;a.src=c;a.type=b.type;a.addEventListener("load",b.onComplete,!1);return a}})(__songle__)}).call(this);
(function(){null==window.__songle__&&(window.__songle__={});(function(c){var f;c.debug=function(b,a){if(!(c.msie6||c.msie7||c.msie8||c.msie9)&&c.useDebugMode)return console.debug(f(b,a))};c.error=function(b,a){if(!(c.msie6||c.msie7||c.msie8||c.msie9)&&c.useErrorMode)return console.error(f(b,a))};c.warn=function(b){if(!(c.msie6||c.msie7||c.msie8||c.msie9))return console.warn("[\u8b66\u544a] "+b+"\uff08\u8a73\u7d30\u60c5\u5831:'https://widget.songle.jp/docs'\uff09")};return f=function(b,a){var d,e,
f;null==a&&(a={});null==a.prefix&&(a.prefix=" ");null==a.suffix&&(a.suffix=" ");f=new Date;d=("00"+f.getHours()).slice(-2);e=("00"+f.getMinutes()).slice(-2);f=("00"+f.getSeconds()).slice(-2);return"["+d+":"+e+":"+f+"]["+c.toSeconds(c.uptime).toFixed(2)+" sec]"+a.prefix+b+a.suffix}})(__songle__)}).call(this);(function(){null==window.__songle__&&(window.__songle__={});(function(c){return c.random=function(c,b){return Math.floor(Math.random()*(b-c+1)+c)}})(__songle__)}).call(this);
(function(){null==window.__songle__&&(window.__songle__={});(function(c){return Object.defineProperties(c,{msie:{configurable:!0,get:function(){return c.msie6||c.msie7||c.msie8||c.msie9||c.msie10||c.msie11}},msie6:{configurable:!0,get:function(){return 0<=navigator.appVersion.indexOf("MSIE 6")}},msie7:{configurable:!0,get:function(){return 0<=navigator.appVersion.indexOf("MSIE 7")}},msie8:{configurable:!0,get:function(){return 0<=navigator.appVersion.indexOf("MSIE 8")}},msie9:{configurable:!0,get:function(){return 0<=
navigator.appVersion.indexOf("MSIE 9")}},msie10:{configurable:!0,get:function(){return 0<=navigator.appVersion.indexOf("MSIE 10")}},msie11:{configurable:!0,get:function(){return 0<=navigator.appVersion.indexOf("Trident/7")}}})})(__songle__)}).call(this);
(function(){null==window.__songle__&&(window.__songle__={});(function(c){var f,b;c.requireSongleWidgetAPIv1=function(a,c){null==c&&(c={});null==c.version&&(c.version=1);return b(a,c)};c.requireSongleWidgetAPIv2=function(a,c){null==c&&(c={});null==c.version&&(c.version=2);return b(a,c)};c.requireSongleWidgetAPIv3=function(a,c){null==c&&(c={});null==c.version&&(c.version=3);return b(a,c)};c.requireYouTubeAPI=function(a,b){return a.appendChild(f(b))};f=function(a){null==a&&(a={});return c.createScriptElement("https://www.youtube.com/iframe_api",
{onComplete:function(){var b;return b=setInterval(function(){if(c.youtubeAPIReady)return clearInterval(b),a.onComplete&&a.onComplete()},1)}})};return b=function(a,b){null==b&&(b={});return b.skip?b.onComplete&&b.onComplete():a.appendChild(c.createScriptElement(""+c.protocol+"//"+c.host+c.port+"/v"+b.version+"/api.js",b))}})(__songle__)}).call(this);
(function(){null==window.__songle__&&(window.__songle__={});(function(c){var f;c.getSakuraComments=function(b){null==b&&(b={});null==b.lang&&(b.lang=c.lang);return c.getJSON(""+f("/api/v1/sakura/comments.json",b)+"lang="+b.lang,b)};c.getSong=function(b,a){return c.getJSON(""+f("/api/v1/song.json",a)+"url="+b,a)};c.getSongBeat=function(b,a){null==a.revision&&(a.revision=0);return c.getJSON(""+f("/api/v1/song/beat.json",a)+"revision="+a.revision+"&url="+b,a)};c.getSongChord=function(b,a){null==a.revision&&
(a.revision=0);return c.getJSON(""+f("/api/v1/song/chord.json",a)+"revision="+a.revision+"&url="+b,a)};c.getSongMelody=function(b,a){null==a.revision&&(a.revision=0);return c.getJSON(""+f("/api/v1/song/melody.json",a)+"revision="+a.revision+"&url="+b,a)};c.getSongChorus=function(b,a){null==a.revision&&(a.revision=0);return c.getJSON(""+f("/api/v1/song/chorus.json",a)+"revision="+a.revision+"&url="+b,a)};return f=function(b,a){null==a&&(a={});null==a.cache&&(a.cache=!0);return""+c.protocol+"//"+c.host+
c.port+b+"?"+(a.cache?"":"_="+c.datetime+"&")}})(__songle__)}).call(this);(function(){null==window.__songle__&&(window.__songle__={});(function(c){return c.trimProtocol=function(c){return(c=c.match(/\/\/(.+)/))?c[1]:c[0]}})(__songle__)}).call(this);
(function(){null==window.__songle__&&(window.__songle__={});(function(c){return Object.defineProperties(c,{lang:{configurable:!0,get:function(){return c.params("lang")||c.cookies("lang")||(navigator.browserLanguage||navigator.language||navigator.userLanguage||"").substr(0,2)||"ja"}},rails:{configurable:!0,get:function(){return{env:"production"}}},useCacheMode:{configurable:!0,get:function(){return"1"===c.params("cache")}},useDebugMode:{configurable:!0,get:function(){return"1"===c.params("dm")||"development"===
c.rails.env}},useErrorMode:{configurable:!0,get:function(){return"1"===c.params("em")||"development"===c.rails.env}},useSSLMode:{configurable:!0,get:function(){return"1"===c.params("ssl")}},version:{configurable:!0,get:function(){return"3.1.170"}}})})(__songle__)}).call(this);
(function(){null==window.__songle__&&(window.__songle__={});(function(c){Object.defineProperties(c,{datetime:{configurable:!0,get:function(){return Date.now()}},uptime:{configurable:!0,get:function(){return window.performance?window.performance.now():c.datetime}}});c.toSeconds=function(c){return c/1E3/1};return c.toMinutes=function(c){return c/1E3/60}})(__songle__)}).call(this);
(function(){null==window.__songle__&&(window.__songle__={});(function(c){return window.onYouTubeIframeAPIReady=function(){return Object.defineProperty(c,"youtubeAPIReady",{configurable:!0,get:function(){return!0}})}})(__songle__)}).call(this);
(function(){null==window.SongleWidgetAPI&&(window.SongleWidgetAPI={});(function(c){var f,b,a,d;f=function(){var a,b,c,d,f,g,m,l,x,q,p,t,y,z,s,u,w,A,J,K,L,M,C,D,B,v,E,F,G,H,I;a=function(a,b){a.adjustBeatTiming=function(b,c){null==c&&(c={});__songle__.warn("'SongleWidget.adjustBeatTiming' \u306f\u3001\u5c06\u6765\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\u4ee3\u308f\u308a\u306b 'SongleWidget.beatEventTimingOffset' \u3092\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\u3002");a.beatEventTimingOffset=
c.offset||0;return a};a.adjustChordTiming=function(b,c){null==c&&(c={});__songle__.warn("'SongleWidget.adjustChordTiming' \u306f\u3001\u5c06\u6765\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\u4ee3\u308f\u308a\u306b 'SongleWidget.chordEventTimingOffset' \u3092\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\u3002");a.chordEventTimingOffset=c.offset||0;return a};a.adjustNoteTiming=function(b,c){null==c&&(c={});__songle__.warn("'SongleWidget.adjustNoteTiming' \u306f\u3001\u5c06\u6765\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\u4ee3\u308f\u308a\u306b 'SongleWidget.noteEventTimingOffset' \u3092\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\u3002");
a.noteEventTimingOffset=c.offset||0;return a};a.adjustChorusTiming=function(b,c){null==c&&(c={});__songle__.warn("'SongleWidget.adjustChorusTiming' \u306f\u3001\u5c06\u6765\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\u4ee3\u308f\u308a\u306b 'SongleWidget.chorusSegmentEventTimingOffset' \u3092\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\u3002");a.chorusSegmentEventTimingOffset=c.offset||0;return a};return a.adjustRepeatTiming=function(b,c){null==c&&(c={});__songle__.warn("'SongleWidget.adjustRepeatTiming' \u306f\u3001\u5c06\u6765\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\u4ee3\u308f\u308a\u306b 'SongleWidget.repeatSegmentEventTimingOffset' \u3092\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\u3002");
a.repeatSegmentEventTimingOffset=c.offset||0;return a}};b=function(a,b){a.on=function(c,d,g){var e;null==g&&(g={});null==g.ensureSync&&(g.ensureSync=!0);null==g.offset&&(g.offset=0);c=E(c);c=F(c);c=H(c);c=G(c);c=I(c);switch(!1){case !("beatEnter"===c||"beatLeave"===c):e=new __songle__.BeatDetector(a);break;case !("chordEnter"===c||"chordLeave"===c):e=new __songle__.ChordDetector(a);break;case !("noteEnter"===c||"noteLeave"===c):e=new __songle__.NoteDetector(a);break;case !("chorusSegmentEnter"===
c||"chorusSegmentLeave"===c):e=new __songle__.ChorusSegmentDetector(a);break;case !("repeatSegmentEnter"===c||"repeatSegmentLeave"===c):e=new __songle__.RepeatSegmentDetector(a)}b.traps[c]&&b.traps[c].push({detector:e,invoke:d,ensureSync:g.ensureSync,offset:g.offset});return a};a.off=function(c){c=E(c);c=F(c);c=H(c);c=G(c);c=I(c);b.traps[c]&&(b.traps[c]=[]);return a};a.play=function(b){null==b&&(b={});null==b.ignoreTrap&&(b.ignoreTrap=!1);__songle__.postAPIPlayMessage({options:b},a);return a};a.pause=
function(b){null==b&&(b={});null==b.ignoreTrap&&(b.ignoreTrap=!1);__songle__.postAPIPauseMessage({options:b},a);return a};a.stop=function(b){null==b&&(b={});null==b.ignoreTrap&&(b.ignoreTrap=!1);__songle__.postAPIStopMessage({options:b},a);return a};a.seekTo=function(b,c){null==c&&(c={});null==c.ignoreTrap&&(c.ignoreTrap=!1);__songle__.postAPISeekToMessage({milliseconds:b,options:c},a);return a};a.seekToPrevChorus=function(b){null==b&&(b={});null==b.ignoreTrap&&(b.ignoreTrap=!1);__songle__.postAPISeekToPrevChorusMessage({options:b},
a);return a};a.seekToNextChorus=function(b){null==b&&(b={});null==b.ignoreTrap&&(b.ignoreTrap=!1);__songle__.postAPISeekToNextChorusMessage({options:b},a);return a};a.seekToPrevRepeat=function(b){null==b&&(b={});null==b.ignoreTrap&&(b.ignoreTrap=!1);__songle__.postAPISeekToPrevRepeatMessage({options:b},a);return a};a.seekToNextRepeat=function(b){null==b&&(b={});null==b.ignoreTrap&&(b.ignoreTrap=!1);__songle__.postAPISeekToNextRepeatMessage({options:b},a);return a};a.setAllEventTimingOffset=function(b){a.beatEventTimingOffset=
b;a.chordEventTimingOffset=b;a.noteEventTimingOffset=b;a.chorusSegmentEventTimingOffset=b;a.repeatSegmentEventTimingOffset=b;return a};a.setVolume=function(b){__songle__.postAPISetVolumeMessage({volume:b},a);return a};return a.remove=function(c){__songle__.postAPIRemoveMessage({options:c},a);removeEventListener("message",b.apiMessage,!1);return a}};c=function(a,b){return Object.defineProperties(b.dataset.song.analysis,{segments:{get:function(){__songle__.warn("'SongleWidget.song.analysis.segments' \u306f\u3001\u5c06\u6765\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\u4ee3\u308f\u308a\u306b 'SongleWidget.song.analysis.repeatSegments' \u3092\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\u3002");
return b.dataset.song.analysis.repeatSegments}}})};d=function(a,b){return Object.defineProperties(a,{dataset:{get:function(){return{api:b.dataset.api,url:b.dataset.url}}},mode:{get:function(){return b.dataset.widgetMode}},uuid:{get:function(){return b.dataset.widgetUUID}},videoID:{get:function(){return b.dataset.videoID}},isPlayed:{get:function(){return"play"===b.source.status}},isPlaying:{get:function(){return"play"===b.source.status}},isPaused:{get:function(){return"pause"===b.source.status}},isPausing:{get:function(){return"pause"===
b.source.status}},isStopped:{get:function(){return"stop"===b.source.status}},isStopping:{get:function(){return"stop"===b.source.status}},bpm:{get:function(){return b.source.bpm}},currentBeat:{get:function(){return b.source.currentBeat}},currentChord:{get:function(){return b.source.currentChord}},currentNote:{get:function(){return b.source.currentNote}},currentChorus:{get:function(){return a.currentChorusSegment}},currentChorusSegment:{get:function(){return b.source.currentChorusSegment}},currentRepeat:{get:function(){return a.currentRepeatSegment}},
currentRepeatSegment:{get:function(){return b.source.currentRepeatSegment}},isPlayingChorus:{get:function(){return a.isPlayingChorusSegment}},isPlayingChorusSegment:{get:function(){return!!b.source.currentChorusSegment}},isPlayingRepeat:{get:function(){return a.isPlayingRepeatSegment}},isPlayingRepeatSegment:{get:function(){return!!b.source.currentRepeatSegment}},duration:{get:function(){var a;a=b.source.duration;return{milliseconds:a,seconds:__songle__.toSeconds(a),minutes:__songle__.toMinutes(a)}}},
position:{get:function(){var c;c=b.source.position+f(a,b);return{milliseconds:c,seconds:__songle__.toSeconds(c),minutes:__songle__.toMinutes(c)}}},loadedRatio:{get:function(){return b.source.loadedRatio}},playedRatio:{get:function(){var c,d;return a.isPlaying?(c=a.duration.milliseconds,d=a.position.milliseconds,d/c):b.source.playedRatio}},song:{get:function(){return b.dataset.song}},eventPollingInterval:{get:function(){return b.configuration.eventPollingInterval},set:function(a){return b.configuration.eventPollingInterval=
a}},beatEventPriority:{get:function(){return b.configuration.beatEventPriority},set:function(a){return b.configuration.beatEventPriority=a}},beatEventTimingOffset:{get:function(){return b.configuration.beatEventTimingOffset},set:function(a){return b.configuration.beatEventTimingOffset=a}},chordEventPriority:{get:function(){return b.configuration.chordEventPriority},set:function(a){return b.configuration.chordEventPriority=a}},chordEventTimingOffset:{get:function(){return b.configuration.chordEventTimingOffset},
set:function(a){return b.configuration.chordEventTimingOffset=a}},noteEventPriority:{get:function(){return b.configuration.noteEventPriority},set:function(a){return b.configuration.noteEventPriority=a}},noteEventTimingOffset:{get:function(){return b.configuration.noteEventTimingOffset},set:function(a){return b.configuration.noteEventTimingOffset=a}},chorusSegmentEventPriority:{get:function(){return b.configuration.chorusSegmentEventPriority},set:function(a){return b.configuration.chorusSegmentEventPriority=
a}},chorusSegmentEventTimingOffset:{get:function(){return b.configuration.chorusSegmentEventTimingOffset},set:function(a){return b.configuration.chorusSegmentEventTimingOffset=a}},repeatSegmentEventPriority:{get:function(){return b.configuration.repeatSegmentEventPriority},set:function(a){return b.configuration.repeatSegmentEventPriority=a}},repeatSegmentEventTimingOffset:{get:function(){return b.configuration.repeatSegmentEventTimingOffset},set:function(a){return b.configuration.repeatSegmentEventTimingOffset=
a}}})};f=function(b,a){var c;return b.isPlaying?(c=__songle__.uptime-a.source.timeStamp,0>c&&(c=0),c>b.duration.milliseconds&&(c=b.duration.milliseconds),c):0};g=function(b,a){addEventListener("message",a.apiMessage=function(c){var d,g;c=__songle__.decodePostMessage(c.data)||{};if(c.api===a.dataset.api)switch(c.type){case "sync":return d=b.position.milliseconds,a.source.duration=c.duration,a.source.position=c.position,a.source.timeStamp=c.timeStamp+__songle__.uptime-c.timeStamp,g=b.position.milliseconds,
d-=g,500<d&&10500>d&&B(b,a),q(b,a),p(b,a,c),y(b,a,c);case "onError":return __songle__.error("Songle Widget API instance (Widget UUID: "+c.widgetUUID+") has beeen requested 'onError' message. It may be panic.");case "onCreate":return __songle__.error("Songle Widget API instance (Widget UUID: "+c.widgetUUID+") has beeen requested 'onCreate' message. It may be panic.");case "onReady":return __songle__.error("Songle Widget API instance (Widget UUID: "+c.widgetUUID+") has beeen requested 'onReady' message. It may be panic.");
case "onRemove":return __songle__.error("Songle Widget API instance (Widget UUID: "+c.widgetUUID+") has beeen requested 'onRemove' message. It may be panic.");case "onPlay":return w(b,a,"play");case "onPause":return w(b,a,"pause");case "onStop":return w(b,a,"stop");case "onSeek":return w(b,a,"seek");case "onFinish":return w(b,a,"finish")}},!1);return B(b,a)};m=function(b,a,c){a.beatDetector.forEach({enter:function(b){a.source.bpm=b.beat.bpm;return a.source.currentBeat=b.beat}},{offset:b.beatEventTimingOffset,
positionA:c,positionB:c});u(b,a,"beatLeave",c,b.beatEventTimingOffset);return s(b,a,"beatEnter",c,b.beatEventTimingOffset)};l=function(b,a,c){a.chordDetector.forEach({enter:function(b){return a.source.currentChord=b.chord}});u(b,a,"chordLeave",c,b.chordEventTimingOffset);return s(b,a,"chordEnter",c,b.chordEventTimingOffset)};t=function(b,a,c){a.noteDetector.forEach({enter:function(b){return a.source.currentNote=b.note}});u(b,a,"noteLeave",c,b.noteEventTimingOffset);return s(b,a,"noteEnter",c,b.noteEventTimingOffset)};
x=function(b,a,c){a.chorusSegmentDetector.forEach({enter:function(b){return a.source.currentChorusSegment=b},leave:function(){return a.source.currentChorusSegment=null}},{offset:b.chorusSegmentEventTimingOffset,positionA:c,positionB:c});u(b,a,"chorusSegmentLeave",c,b.chorusSegmentEventTimingOffset);return s(b,a,"chorusSegmentEnter",c,b.chorusSegmentEventTimingOffset)};z=function(b,a,c){a.repeatSegmentDetector.forEach({enter:function(b){return a.source.currentRepeatSegment=b},leave:function(){return a.source.currentRepeatSegment=
null}},{offset:b.repeatSegmentEventTimingOffset,positionA:c,positionB:c});u(b,a,"repeatSegmentLeave",c,b.repeatSegmentEventTimingOffset);return s(b,a,"repeatSegmentEnter",c,b.repeatSegmentEventTimingOffset)};q=function(b,a){var c,d,g,e,l,m,f,n;f=a.delayedTrapNames;g=0;for(l=f.length;g<l;g++){c=f[g];n=a.traps[c];e=0;for(m=n.length;e<m;e++)d=n[e],d.ensureSync&&d.invoke(b);switch(c){case "pause":B(b,a);break;case "stop":B(b,a);break;case "seek":B(b,a);break;case "finish":B(b,a)}}return a.delayedTrapNames=
[]};p=function(b,a,c){var d,g,e;if(0!==a.source.loadedRatio-c.loadedRatio){a.source.loadedRatio=c.loadedRatio;g=a.traps.loadingProgress;e=[];c=0;for(d=g.length;c<d;c++)a=g[c],e.push(a.invoke(b));return e}};y=function(b,a,c){var d,g,e;if(0!==a.source.playedRatio-c.playedRatio){a.source.playedRatio=c.playedRatio;g=a.traps.playingProgress;e=[];c=0;for(d=g.length;c<d;c++)a=g[c],e.push(a.invoke(b));return e}};s=function(b,a,c,d,g){var e,l,m;l=a.traps[c];m=[];a=0;for(c=l.length;a<c;a++)e=l[a],m.push(e.detector.forEach({enter:function(a){return e.invoke(a,
b)}},{offset:g+e.offset,positionA:d,positionB:d}));return m};u=function(a,b,c,d,g){var e,l,m;l=b.traps[c];m=[];b=0;for(c=l.length;b<c;b++)e=l[b],m.push(e.detector.forEach({leave:function(b){return e.invoke(b,a)}},{offset:g+e.offset,positionA:d,positionB:d}));return m};w=function(b,a,c){var d,g,e,l;l=a.traps[c];g=0;for(e=l.length;g<e;g++)d=l[g],d.ensureSync||d.invoke(b);switch(c){case "seek":if(-1===a.delayedTrapNames.indexOf(c))return a.delayedTrapNames.push(c),a.source.status="pause";break;case "finish":if(-1===
a.delayedTrapNames.indexOf(c))return a.delayedTrapNames.push(c),a.source.status="pause";break;default:if(-1===a.delayedTrapNames.indexOf(c))return a.delayedTrapNames.push(c),a.source.status=c}};A=function(a,b){b.beatDetector.reset();D(a,b,"beatLeave");return C(a,b,"beatEnter")};J=function(a,b){D(a,b,"chordLeave");return C(a,b,"chordEnter")};L=function(a,b){D(a,b,"noteLeave");return C(a,b,"noteEnter")};K=function(a,b){b.chorusSegmentDetector.reset({leave:function(){return b.source.currentChorusSegment=
null}});D(a,b,"chorusSegmentLeave");return C(a,b,"chorusSegmentEnter")};M=function(a,b){b.repeatSegmentDetector.reset({leave:function(){return b.source.currentRepeatSegment=null}});D(a,b,"repeatSegmentLeave");return C(a,b,"repeatSegmentEnter")};C=function(a,b,c){var d,g,e;g=b.traps[c];e=[];b=0;for(c=g.length;b<c;b++)d=g[b],e.push(d.detector.reset({enter:function(b){return d.invoke(b,a)}}));return e};D=function(b,a,c){var d,g,e;g=a.traps[c];e=[];a=0;for(c=g.length;a<c;a++)d=g[a],e.push(d.detector.reset({leave:function(a){return d.invoke(a,
b)}}));return e};B=function(a,b){var c;null==b.beatDetector&&(b.beatDetector=new __songle__.BeatDetector(a));null==b.chordDetector&&(b.chordDetector=new __songle__.ChordDetector(a));null==b.noteDetector&&(b.noteDetector=new __songle__.NoteDetector(a));null==b.chorusSegmentDetector&&(b.chorusSegmentDetector=new __songle__.ChorusSegmentDetector(a));null==b.repeatSegmentDetector&&(b.repeatSegmentDetector=new __songle__.RepeatSegmentDetector(a));clearTimeout(b.detectorTimeoutID);v(a)[0].resetTrap(a,b);
v(a)[1].resetTrap(a,b);v(a)[2].resetTrap(a,b);v(a)[3].resetTrap(a,b);v(a)[4].resetTrap(a,b);c=function(){return b.detectorTimeoutID=setTimeout(function(){var d;a.isPlaying&&(d=a.position.milliseconds,v(a)[0].invokeTrap(a,b,d),v(a)[1].invokeTrap(a,b,d),v(a)[2].invokeTrap(a,b,d),v(a)[3].invokeTrap(a,b,d),v(a)[4].invokeTrap(a,b,d));return c()},b.eventPollingInterval)};return c()};v=function(a){return[{priority:a.beatEventPriority,invokeTrap:m,resetTrap:A},{priority:a.chordEventPriority,invokeTrap:l,
resetTrap:J},{priority:a.noteEventPriority,invokeTrap:t,resetTrap:L},{priority:a.chorusSegmentEventPriority,invokeTrap:x,resetTrap:K},{priority:a.repeatSegmentEventPriority,invokeTrap:z,resetTrap:M}].sort(function(a,b){return a.priority<b.priority})};E=function(a){switch(a){case "beatPlay":return"beatEnter"}return a};F=function(a){switch(a){case "chordPlay":return"chordEnter"}return a};H=function(a){switch(a){case "notePlay":return"noteEnter"}return a};G=function(a){switch(a){case "chorusEnter":return"chorusSegmentEnter";
case "chorusLeave":return"chorusSegmentLeave"}return a};I=function(a){switch(a){case "repeatEnter":return"repeatSegmentEnter";case "repeatLeave":return"repeatSegmentLeave"}return a};return function(l){l={configuration:{eventPollingInterval:200,beatEventPriority:3,beatEventTimingOffset:0,chordEventPriority:2,chordEventTimingOffset:0,noteEventPriority:1,noteEventTimingOffset:0,chorusSegmentEventPriority:5,chorusSegmentEventTimingOffset:0,repeatSegmentEventPriority:4,repeatSegmentEventTimingOffset:0},
dataset:l,delayedTrapNames:[],source:{duration:0,position:0,loadedRatio:0,playedRatio:0,timeStamp:0,bpm:0,currentBeat:null,currentChord:null,currentNote:null,currentChorusSegment:null,currentRepeatSegment:null},traps:{beatEnter:[],beatLeave:[],chordEnter:[],chordLeave:[],noteEnter:[],noteLeave:[],chorusSegmentEnter:[],chorusSegmentLeave:[],repeatSegmentEnter:[],repeatSegmentLeave:[],play:[],pause:[],stop:[],seek:[],loadingProgress:[],playingProgress:[],finish:[]}};a(this,l);b(this,l);c(this,l);d(this,
l);g(this,l);switch(this.mode){case "mp3":this.setAllEventTimingOffset(-175);break;case "nn-video":this.setAllEventTimingOffset(-25);break;case "yt-video":this.setAllEventTimingOffset(-175)}}}();addEventListener("message",function(c){var f;c=__songle__.decodePostMessage(c.data)||{};if(c.api)switch(c.type){case "onError":if(-1===__songle__.__erroredSongleWidgets__.indexOf(c.widgetUUID))return a(c);break;case "onCreate":if(-1===__songle__.__createdSongleWidgets__.indexOf(c.widgetUUID))return b(c);break;
case "onReady":if(f=__songle__.findSongleWidgetsByWidgetUUID(c.widgetUUID)[0],!f)return d(c)}},!1);a=function(a){__songle__.__erroredSongleWidgets__.push(a.widgetUUID);return setTimeout(function(){return window.onSongleWidgetError&&window.onSongleWidgetError(a.api,{api:a.api,url:a.url,widgetMode:a.widgetMode,widgetUUID:a.widgetUUID,videoID:a.videoID,status:a.status})},1E3)};b=function(a){__songle__.__createdSongleWidgets__.push(a.widgetUUID);return setTimeout(function(){return window.onSongleWidgetCreate&&
window.onSongleWidgetCreate(a.api,{api:a.api,url:a.url,widgetMode:a.widgetMode,widgetUUID:a.widgetUUID,videoID:a.videoID,status:a.status})},1E3)};return d=function(a){var b;__songle__.__readiedSongleWidgets__.push(b=new f(a));return setTimeout(function(){return window.onSongleWidgetReady&&window.onSongleWidgetReady(a.api,b)},1E3)}})(SongleWidgetAPI)}).call(this);
(function(){null==window.SongleWidgetAPI&&(window.SongleWidgetAPI={});var c=SongleWidgetAPI;c.BeatDetector=__songle__.BeatDetector;c.ChordDetector=__songle__.ChordDetector;c.NoteDetector=__songle__.NoteDetector;c.ChorusSegmentDetector=__songle__.ChorusSegmentDetector;c.RepeatSegmentDetector=__songle__.RepeatSegmentDetector}).call(this);
(function(){null==window.SongleWidgetAPI&&(window.SongleWidgetAPI={});(function(c){return c.computeOffsetFromRepeatSegmentBy=function(c,b){var a,d,e,h,k,r,n,g,m;null==b&&(b={});null==b.beatCount&&(b.beatCount=0);null==b.repeatSegmentIndex&&(b.repeatSegmentIndex=0);e=c.song.analysis.beats;if(d=c.song.analysis.repeatSegments[b.repeatSegmentIndex])for(m=d.repeats,k=0,n=m.length;k<n;k++)for(h=m[k],r=0,g=e.length;r<g;r++)if(a=e[r],a.start>=h.start&&(d=e[a.index],a=e[a.index+b.beatCount],d&&a))return a.start-
d.start;return 0}})(SongleWidgetAPI)}).call(this);
(function(){null==window.SongleWidgetAPI&&(window.SongleWidgetAPI={});(function(c){var f,b;c.createSongleWidgetElement=function(a){var c;null==a&&(a={});c=document.createElement("div");c.appendChild(f(a));c.appendChild(b(a));return c};f=function(a){null==a&&(a={});null==a.version&&(a.version=1);return __songle__.createScriptElement(""+__songle__.protocol+"//"+__songle__.host+__songle__.port+"/v"+a.version+"/widgets.js")};return b=function(a){var b;null==a&&(a={});b=document.createElement("div");b.id=
"songle-widget";void 0!==a.api&&b.setAttribute("data-api",a.api);void 0!==a.url&&b.setAttribute("data-url",a.url);void 0!==a.apiBeatDisabled&&b.setAttribute("data-api-beat-disabled",a.apiBeatDisabled);void 0!==a.apiChordDisabled&&b.setAttribute("data-api-chord-disabled",a.apiChordDisabled);void 0!==a.apiMelodyDisabled&&b.setAttribute("data-api-melody-disabled",a.apiMelodyDisabled);void 0!==a.apiChorusDisabled&&b.setAttribute("data-api-chorus-disabled",a.apiChorusDisabled);void 0!==a.apiBeatRevision&&
b.setAttribute("data-api-beat-revision",a.apiBeatRevision);void 0!==a.apiChordRevision&&b.setAttribute("data-api-chord-revision",a.apiChordRevision);void 0!==a.apiMelodyRevision&&b.setAttribute("data-api-melody-revision",a.apiMelodyRevision);void 0!==a.apiChorusRevision&&b.setAttribute("data-api-chorus-revision",a.apiChorusRevision);void 0!==a.songAutoLoad&&b.setAttribute("data-song-auto-load",a.songAutoLoad);void 0!==a.songAutoPlay&&b.setAttribute("data-song-auto-play",a.songAutoPlay);void 0!==a.songAutoLoop&&
b.setAttribute("data-song-auto-loop",a.songAutoLoop);void 0!==a.songStartAt&&b.setAttribute("data-song-start-at",a.songStartAt);void 0!==a.songleWidgetCtrl&&b.setAttribute("data-songle-widget-ctrl",a.songleWidgetCtrl);void 0!==a.songleWidgetCtrlEnterColor&&b.setAttribute("data-songle-widget-ctrl-enter-color",a.songleWidgetCtrlEnterColor);void 0!==a.songleWidgetCtrlLeaveColor&&b.setAttribute("data-songle-widget-ctrl-leave-color",a.songleWidgetCtrlLeaveColor);void 0!==a.songleWidgetLinkColor&&b.setAttribute("data-songle-widget-link-color",
a.songleWidgetLinkColor);void 0!==a.songleWidgetSizeW&&b.setAttribute("data-songle-widget-size-w",a.songleWidgetSizeW);void 0!==a.songleWidgetSizeH&&b.setAttribute("data-songle-widget-size-h",a.songleWidgetSizeH);void 0!==a.videoPlayerSizeW&&b.setAttribute("data-video-player-size-w",a.videoPlayerSizeW);void 0!==a.videoPlayerSizeH&&b.setAttribute("data-video-player-size-h",a.videoPlayerSizeH);void 0!==a.nnComment&&b.setAttribute("data-nn-comment",a.nnComment);void 0!==a.nnCtrl&&b.setAttribute("data-nn-ctrl",
a.nnCtrl);void 0!==a.nnLink&&b.setAttribute("data-nn-link",a.nnLink);void 0!==a.nnTransparent&&b.setAttribute("data-nn-transparent",a.nnTransparent);void 0!==a.standalone&&b.setAttribute("data-standalone",a.standalone);void 0!==a.standaloneMp3Path&&b.setAttribute("data-standalone-mp3-path",a.standaloneMp3Path);void 0!==a.onError&&(window.onSongleWidgetError=function(b,c){if(b===a.api)return a.onError(c)});void 0!==a.onCreate&&(window.onSongleWidgetCreate=function(b,c){if(b===a.api)return a.onCreate(c)});
void 0!==a.onReady&&(window.onSongleWidgetReady=function(b,c){if(b===a.api)return a.onReady(c)});return b}})(SongleWidgetAPI)}).call(this);
(function(){null==window.SongleWidgetAPI&&(window.SongleWidgetAPI={});(function(c){var f,b,a,d,e,h,k,r,n;c.embedSongleWidget=function(a){null==a&&(a={});null==a.rootElement&&(a.rootElement=document.querySelector("body"));null==a.snapMarginX&&(a.snapMarginX=0);null==a.snapMarginY&&(a.snapMarginY=0);null==a.useSongSearchUI&&(a.useSongSearchUI=!1);null==a.zIndex&&(a.zIndex=1E3);return d(e(a),a)};f=function(a){var b;null==a.navColor&&(a.navColor="#e17");b=document.createElement("div");b.style.color=a.navColor;
b.style.fontSize="12px";k(b,"none");return b};b=function(a){var b;b=document.createElement("span");b.style.cursor="pointer";b.appendChild(document.createTextNode(a));return b};a=function(a,d){var e,f;d.searchIconColor="black";e=b("en"!==__songle__.lang?"\u697d\u66f2\u691c\u7d22":"Song Search");e.style.paddingLeft="20px";e.style.background="black"===d.searchIconColor?"url("+__songle__.protocol+"//"+__songle__.host+__songle__.port+"/assets/icons/search-black-a6e5b3f401f1ba78374f1f354d0ed767.png) -1px -1px no-repeat":
"url("+__songle__.protocol+"//"+__songle__.host+__songle__.port+"/assets/icons/search-white-83391f9b793229981e1ea96a139dccc3.png) -1px -1px no-repeat";f=c.createSongleSearchElement({display:"none",onSongSelect:function(a){if(!d.onSongSelect||!d.onSongSelct(a))return location.href=""+location.pathname+"?"+__songle__.createSearchQueriesWithJoin({url:encodeURIComponent(__songle__.trimProtocol(a.permalink))})}});document.body.appendChild(f);e.addEventListener("click",function(){switch(f.style.display){case "block":return f.style.display=
"none";case "none":return f.style.display="block";default:return f.style.display="none"}},!1);e.addEventListener("mouseenter",function(){return e.style.borderBottom="2px solid #e17"},!1);e.addEventListener("mouseleave",function(){return e.style.borderBottom="0px solid #e17"},!1);return e};d=function(b,c){var d,e;e=c.rootElement;e.appendChild(b);c.useSongSearchUI&&(d=f(c),d.appendChild(a(e,c)),b.appendChild(d));n(b,c);return b};e=function(a){var b,c;b=SongleWidgetAPI.createSongleWidgetElement({api:__songle__.params("api")||
a.api,url:__songle__.params("url")||a.url,apiBeatDisabled:__songle__.params("api-beat-disabled")||a.apiBeatDisabled,apiChordDisabled:__songle__.params("api-chord-disabled")||a.apiChordDisabled,apiMelodyDisabled:__songle__.params("api-melody-disabled")||a.apiMelodyDisabled,apiChorusDisabled:__songle__.params("api-chorus-disabled")||a.apiChorusDisabled,apiBeatRevision:__songle__.params("api-beat-revision")||a.apiBeatRevision,apiChordRevision:__songle__.params("api-chord-revision")||a.apiChordRevision,
apiMelodyRevision:__songle__.params("api-melody-revision")||a.apiMelodyRevision,apiChorusRevision:__songle__.params("api-chorus-revision")||a.apiChorusRevision,songAutoLoad:__songle__.params("song-auto-load")||a.songAutoLoad,songAutoPlay:__songle__.params("song-auto-play")||a.songAutoPlay,songAutoLoop:__songle__.params("song-auto-loop")||a.songAutoLoop,songStartAt:__songle__.params("song-start-at")||a.songStartAt,songleWidgetCtrl:__songle__.params("songle-widget-ctrl")||a.songleWidgetCtrl,songleWidgetCtrlEnterColor:__songle__.params("songle-widget-ctrl-enter-color")||
a.songleWidgetCtrlEnterColor,songleWidgetCtrlLeaveColor:__songle__.params("songle-widget-ctrl-leave-color")||a.songleWidgetCtrlLeaveColor,songleWidgetLinkColor:__songle__.params("songle-widget-link-color")||a.songleWidgetLinkColor,songleWidgetSizeW:__songle__.params("songle-widget-size-w")||a.songleWidgetSizeW,songleWidgetSizeH:__songle__.params("songle-widget-size-h")||a.songleWidgetSizeH,videoPlayerSizeW:__songle__.params("video-player-size-w")||a.videoPlayerSizeW,videoPlayerSizeH:__songle__.params("video-player-size-h")||
a.videoPlayerSizeH,nnComment:__songle__.params("nn-comment")||a.nnComment,nnCtrl:__songle__.params("nn-ctrl")||a.nnCtrl,nnLink:__songle__.params("nn-link")||a.nnLink,nnTransparent:__songle__.params("nn-transparent")||a.nnTransparent,standalone:__songle__.params("standalone")||a.standalone,standaloneMp3Path:__songle__.params("standalone-mp3-path")||a.standaloneMp3Path,onError:a.onError,onCreate:a.onCreate,onReady:a.onReady});c=document.createElement("div");r(a)&&(window.addEventListener("resize",function(){return n(c,
a)},!1),window.addEventListener("scroll",function(){return n(c,a)},!1));c.appendChild(b);return c};h=function(){return window.scrollY||document.documentElement.scrollTop||document.body.scrollTop||0};k=function(a,b){var c,d,e,f,n;f=["ms","moz","webkit","o"];n=[];d=0;for(e=f.length;d<e;d++)c=f[d],n.push(a.style[""+c+"UserSelect"]=b);return n};r=function(a){switch(a.snapMode){case "top-left":return!0;case "top-right":return!0;case "bottom-left":return!0;case "bottom-right":return!0}return!1};return n=
function(a,b){var c;if(r(b))switch(a.style.position="absolute",a.style.zIndex=b.zIndex,b.snapMode){case "top-left":return c=h(),a.style.left=b.snapMarginX+"px",a.style.top=c+b.snapMarginY+"px";case "top-right":return c=h(),a.style.right=b.snapMarginX+"px",a.style.top=c+b.snapMarginY+"px";case "bottom-left":return c=document.body.clientHeight-window.innerHeight-h(),a.style.left=b.snapMarginX+"px",a.style.bottom=c+b.snapMarginY+"px";case "bottom-right":return c=document.body.clientHeight-window.innerHeight-
h(),a.style.right=b.snapMarginX+"px",a.style.bottom=c+b.snapMarginY+"px"}}})(SongleWidgetAPI)}).call(this);
(function(){null==window.SongleWidgetAPI&&(window.SongleWidgetAPI={});var c=SongleWidgetAPI;c.findSongleWidgets=__songle__.findSongleWidgets;c.findSongleWidgetsByAPI=__songle__.findSongleWidgetsByAPI;c.findSongleWidgetsByURL=__songle__.findSongleWidgetsByURL;c.findSongleWidgetsByWidgetMode=__songle__.findSongleWidgetsByWidgetMode;c.findSongleWidgetsByWidgetUUID=__songle__.findSongleWidgetsByWidgetUUID;c.findSongleWidgetsByVideoID=__songle__.findSongleWidgetsByVideoID}).call(this);
(function(){null==window.SongleWidgetAPI&&(window.SongleWidgetAPI={});var c=SongleWidgetAPI;c.getSong=__songle__.getSong;c.getSongBeat=__songle__.getSongBeat;c.getSongChord=__songle__.getSongChord;c.getSongMelody=__songle__.getSongMelody;c.getSongChorus=__songle__.getSongChorus}).call(this);
(function(){null==window.SongleWidgetAPI&&(window.SongleWidgetAPI={});(function(c){var f,b,a,d,e,h,k;c.createSongleSearchElement=function(c){var d,e,m;null==c&&(c={});null==c.zIndex&&(c.zIndex=1E3);d=document.createElement("div");d.id="songle-widget-search-form";d.style.position="absolute";d.style.left="0px";d.style.top="0px";d.style.width="300px";d.style.zIndex=c.zIndex+0;e=document.createElement("div");e.id="songle-widget-search-list";e.style.position="absolute";e.style.left="0px";e.style.top="80px";
e.style.width="300px";e.style.zIndex=c.zIndex+1;b(d,e,{onSubmit:function(b){var d;k(b,{onComplete:function(b){var d,f,l,n;n=[];f=0;for(l=b.length;f<l;f++)d=b[f],n.push(a(e,d,c));return n}});for(d=[];b=e.lastChild;)d.push(e.removeChild(b));return d}});m=f(c);m.appendChild(d);m.appendChild(e);return m};f=function(a){var b;null==a&&(a={});a.background="rgba(255,255,255,0.75)";b=document.createElement("div");b.style.display=a.display;b.style.position="absolute";b.style.background=a.background;b.style.fontSize=
"12px";b.style.left="0px";b.style.top="0px";b.style.width="300px";b.style.height="0px";b.style.overflowX="hidden";b.style.overflowY="auto";b.style.zIndex=a.zIndex+2;a=function(){b.style.top=window.scrollY+"px";return b.style.height=window.innerHeight+"px"};a();window.addEventListener("resize",a,!1);window.addEventListener("scroll",a,!1);return b};b=function(a,b,c){var d,e,f,h;null==c&&(c={});null==c.placeholder&&(c.placeholder="en"!==__songle__.lang?"\uff08\u4f8b\uff0940\u30e1\u30fc\u30c8\u30ebP":
"e.g. 40mP");d=document.createElement("div");d.style.background="#e17 url("+__songle__.protocol+"//"+__songle__.host+__songle__.port+"/assets/v1/logo-18a52a347df0b5e3234a40b19e6d5eac.png) 10px no-repeat";d.style.width="100%";d.style.height="50px";e=document.createElement("input");e.type="text";e.placeholder=c.placeholder;e.style.margin=0;e.style.padding=0;e.style.border=0;e.style.width="80%";e.style.height="30px";f=document.createElement("button");f.type="button";f.placeholder=c.placeholder;f.style.margin=
0;f.style.padding=0;f.style.border=0;f.style.width="20%";f.style.height="30px";f.appendChild(document.createTextNode("en"!==__songle__.lang?"\u691c\u7d22":"Search"));h=function(){if(e.value)return c.onSubmit&&c.onSubmit(e.value)};e.addEventListener("change",h,!1);f.addEventListener("submit",h,!1);a.appendChild(d);a.appendChild(e);a.appendChild(f);a=document.createElement("div");a.style.padding="24px";a.style.fontWeight=800;a.style.width="100%";a.style.height="100%";a.appendChild(document.createTextNode("\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u306b\u95a2\u9023\u3059\u308b\u697d\u66f2\u3092\u80fd\u52d5\u7684\u97f3\u697d\u9451\u8cde\u30b5\u30fc\u30d3\u30b9 Songle \uff08\u30bd\u30f3\u30b0\u30eb\uff09\u304b\u3089\u691c\u7d22\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002"));
return b.appendChild(a)};a=function(a,b,c){var e,f,h,k;null==c&&(c={});k=document.createElement("div");k.dataset.song=JSON.stringify(b);k.style.margin=0;k.style.padding=0;k.style.width="100%";k.style.height="75px";k.style.color="#111";k.style.borderBottom="1px solid #e17";k.addEventListener("mouseenter",function(){this.style.background="rgba(255,34,136,1.0)";return this.style.color="#eee"});k.addEventListener("mouseleave",function(){this.style.background="rgba(255,34,136,0.0)";return this.style.color=
"#111"});k.addEventListener("click",function(){return c.onSongSelect&&c.onSongSelect(JSON.parse(this.dataset.song))});e=document.createElement("div");e.style.float="left";e.style.padding="0px";e.style.width="30%";e.style.height="100%";e.style.background="#e17 url("+d(b)+") 50% 50% no-repeat";f=document.createElement("div");f.style.float="left";f.style.padding="0px 4px";f.style.width="70%";f.style.height="80%";f.appendChild(document.createTextNode(b.name));h=document.createElement("div");h.style.float=
"left";h.style.padding="0px 4px";h.style.width="70%";h.style.height="20%";h.appendChild(document.createTextNode(b.artist.name));k.appendChild(e);k.appendChild(f);k.appendChild(h);return a.appendChild(k)};d=function(a){var b;return(b=e(a.permalink))?b:(a=h(a.permalink))?a:""+__songle__.protocol+"//"+__songle__.host+__songle__.port+"/assets/v1/logo-18a52a347df0b5e3234a40b19e6d5eac.png"};e=function(a){if(a=a.match(/sm([\w-]+)/))return"//tn-skr1.smilevideo.jp/smile?i="+a[1]};h=function(a){if(a=a.match(/v=([\w-]+)/))return"//img.youtube.com/vi/"+
a[1]+"/1.jpg"};return k=function(a,b){null==b&&(b={});return __songle__.getJSON(""+__songle__.protocol+"//widget.songle.jp/api/v1/songs/search.json?q="+a,{onComplete:function(a){return b.onComplete&&b.onComplete(a)}})}})(SongleWidgetAPI)}).call(this);(function(){null==window.SongleWidgetAPI&&(window.SongleWidgetAPI={});(function(c){return Object.defineProperty(c,"version",{configurable:!0,get:function(){return __songle__.version}})})(SongleWidgetAPI)}).call(this);(function(){}).call(this);
